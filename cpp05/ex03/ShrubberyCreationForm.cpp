/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ShrubberyCreationForm.cpp                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: maiboyer <maiboyer@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/12/19 17:43:07 by maiboyer          #+#    #+#             */
/*   Updated: 2024/12/20 16:09:48 by maiboyer         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "ShrubberyCreationForm.hpp"
#include "Bureaucrat.hpp"
#include <fstream>
#include <ios>
#include <iostream>

const char *SHRUBBERY = "                                                      "
                        "   .                                    "
                        "                               .          \n"
                        "                                              .       "
                        "  ;                                     "
                        "                    .         ;           \n"
                        "                 .              .              ;%     "
                        ";;                             .        "
                        "      .              ;%     ;;            \n"
                        "                   ,           ,                :;%  "
                        "%;                                ,      "
                        "     ,                :;%  %;             \n"
                        "                    :         ;                   "
                        ":;%;'     .,                          :     "
                        "    ;                   :;%;'     .,      \n"
                        "           ,.        %;     %;            ;        "
                        "%;'    ,;                   ,.        %;   "
                        "  %;            ;        %;'    ,;        \n"
                        "             ;       ;%;  %%;        ,     %;    ;%;  "
                        "  ,%'                      ;       ;%;  "
                        "%%;        ,     %;    ;%;    ,%'         \n"
                        "              %;       %;%;      ,  ;       %;  ;%;   "
                        ",%;'                        %;       "
                        "%;%;      ,  ;       %;  ;%;   ,%;'          \n"
                        "               ;%;      %;        ;%;        % ;%;  "
                        ",%;'                           ;%;      "
                        "%;        ;%;        % ;%;  ,%;'            \n"
                        "                `%;.     ;%;     %;'         "
                        "`;%%;.%;'                              `%;.     "
                        ";%;     %;'         `;%%;.%;'              \n"
                        "                 `:;%.    ;%%. %@;        %; ;@%;%'   "
                        "                               `:;%.    "
                        ";%%. %@;        %; ;@%;%'                 \n"
                        "                    `:%;.  :;bd%;          %;@%;'     "
                        "                                  `:%;. "
                        " :;bd%;          %;@%;'                   \n"
                        "                      `@%:.  :;%.         ;@@%;'      "
                        "                                    "
                        "`@%:.  :;%.         ;@@%;'                    \n"
                        "                        `@%.  `;@%.      ;@@%;        "
                        "    ⠀                                 "
                        "`@%.  `;@%.      ;@@%;            ⠀         \n"
                        "                        `@%%. `@%%    ;@@%;     "
                        "⠀⠀⠀⠀⠀⢀⡀⠀⠀⠀⠀⠀⡄⠀⠀⠀⠀⢀⠀⠀                        "
                        "`@%%. `@%%    ;@@%;     ⠀⠀⠀⠀⠀⢀⡀⠀⠀⠀⠀⠀⡄⠀⠀⠀⠀⢀⠀⠀\n"
                        "  ⠀⠀⠀⠀⠀⢀⡀⠀⠀⠀⠀⠀⡄⠀⠀⠀⠀⢀⠀⠀    ;@%. :@%%  %@@%;      "
                        "⠀⠀⠀⠀⠀⠀⣏⠓⠒⠤⣰⠋⠹⡄⠀⣠⠞⣿⠀⠀  ⠀⠀⠀⠀⠀⢀⡀⠀⠀⠀⠀⠀⡄⠀⠀⠀⠀⢀⠀⠀    "
                        ";@%. :@%%  %@@%;      ⠀⠀⠀⠀⠀⠀⣏⠓⠒⠤⣰⠋⠹⡄⠀⣠⠞⣿⠀⠀\n"
                        "  ⠀⠀⠀⠀⠀⠀⣏⠓⠒⠤⣰⠋⠹⡄⠀⣠⠞⣿⠀⠀      %@bd%%%bd%%:;       "
                        "⠀⠀⠀⢀⠄⠂⠙⢦⡀⠐⠨⣆⠁⣷⣮⠖⠋⠉⠁⠀  ⠀⠀⠀⠀⠀⠀⣏⠓⠒⠤⣰⠋⠹⡄⠀⣠⠞⣿⠀⠀    "
                        "  %@bd%%%bd%%:;       ⠀⠀⠀⢀⠄⠂⠙⢦⡀⠐⠨⣆⠁⣷⣮⠖⠋⠉⠁⠀\n"
                        "  ⠀⠀⠀⢀⠄⠂⠙⢦⡀⠐⠨⣆⠁⣷⣮⠖⠋⠉⠁⠀        #@%%%%%:;;        "
                        "⠀⠀⡰⠁⠀⠮⠇⠀⣩⠶⠒⠾⣿⡯⡋⠩⡓⢦⣀⡀  ⠀⠀⠀⢀⠄⠂⠙⢦⡀⠐⠨⣆⠁⣷⣮⠖⠋⠉⠁⠀    "
                        "    #@%%%%%:;;        ⠀⠀⡰⠁⠀⠮⠇⠀⣩⠶⠒⠾⣿⡯⡋⠩⡓⢦⣀⡀\n"
                        "  ⠀⠀⡰⠁⠀⠮⠇⠀⣩⠶⠒⠾⣿⡯⡋⠩⡓⢦⣀⡀        %@@%%%::;         "
                        "⠀⡰⢰⡹⠀⠀⠲⣾⣁⣀⣤⠞⢧⡈⢊⢲⠶⠶⠛⠁  ⠀⠀⡰⠁⠀⠮⠇⠀⣩⠶⠒⠾⣿⡯⡋⠩⡓⢦⣀⡀    "
                        "    %@@%%%::;         ⠀⡰⢰⡹⠀⠀⠲⣾⣁⣀⣤⠞⢧⡈⢊⢲⠶⠶⠛⠁\n"
                        "  ⠀⡰⢰⡹⠀⠀⠲⣾⣁⣀⣤⠞⢧⡈⢊⢲⠶⠶⠛⠁        %@@@%(o);  . '    "
                        "⢀⠃⠀⠀⠀⣌⡅⠀⢀⡀⠀⠀⣈⠻⠦⣤⣿⡀⠀⠀  ⠀⡰⢰⡹⠀⠀⠲⣾⣁⣀⣤⠞⢧⡈⢊⢲⠶⠶⠛⠁    "
                        "    %@@@%(o);  . '    ⢀⠃⠀⠀⠀⣌⡅⠀⢀⡀⠀⠀⣈⠻⠦⣤⣿⡀⠀⠀\n"
                        "  ⢀⠃⠀⠀⠀⣌⡅⠀⢀⡀⠀⠀⣈⠻⠦⣤⣿⡀⠀⠀        %@@@o%;:(.,'      "
                        "⠸⣎⠇⠀⠀⡠⡄⠀⠷⠎⠀⠐⡶⠁⠀⠀⣟⡇⠀⠀  ⢀⠃⠀⠀⠀⣌⡅⠀⢀⡀⠀⠀⣈⠻⠦⣤⣿⡀⠀⠀    "
                        "    %@@@o%;:(.,'      ⠸⣎⠇⠀⠀⡠⡄⠀⠷⠎⠀⠐⡶⠁⠀⠀⣟⡇⠀⠀\n"
                        "  ⠸⣎⠇⠀⠀⡠⡄⠀⠷⠎⠀⠐⡶⠁⠀⠀⣟⡇⠀⠀    `.. %@@@o%::;         "
                        "⡇⠀⡠⣄⠀⠷⠃⠀⠀⡤⠄⠀⠀⣔⡰⠀⢩⠇⠀⠀  ⠸⣎⠇⠀⠀⡠⡄⠀⠷⠎⠀⠐⡶⠁⠀⠀⣟⡇⠀⠀    "
                        "`.. %@@@o%::;         ⡇⠀⡠⣄⠀⠷⠃⠀⠀⡤⠄⠀⠀⣔⡰⠀⢩⠇⠀⠀\n"
                        "  ⡇⠀⡠⣄⠀⠷⠃⠀⠀⡤⠄⠀⠀⣔⡰⠀⢩⠇⠀⠀       `)@@@o%::;         "
                        "⡇⠀⠻⠋⠀⢀⠤⠀⠈⠛⠁⠀⢀⠉⠁⣠⠏⠀⠀⠀  ⡇⠀⡠⣄⠀⠷⠃⠀⠀⡤⠄⠀⠀⣔⡰⠀⢩⠇⠀⠀    "
                        "   `)@@@o%::;         ⡇⠀⠻⠋⠀⢀⠤⠀⠈⠛⠁⠀⢀⠉⠁⣠⠏⠀⠀⠀\n"
                        "  ⡇⠀⠻⠋⠀⢀⠤⠀⠈⠛⠁⠀⢀⠉⠁⣠⠏⠀⠀⠀        %@@(o)::;         "
                        "⣷⢰⢢⠀⠀⠘⠚⠀⢰⣂⠆⠰⢥⡡⠞⠁⠀⠀⠀⠀  ⡇⠀⠻⠋⠀⢀⠤⠀⠈⠛⠁⠀⢀⠉⠁⣠⠏⠀⠀⠀    "
                        "    %@@(o)::;         ⣷⢰⢢⠀⠀⠘⠚⠀⢰⣂⠆⠰⢥⡡⠞⠁⠀⠀⠀⠀\n"
                        "  ⣷⢰⢢⠀⠀⠘⠚⠀⢰⣂⠆⠰⢥⡡⠞⠁⠀⠀⠀⠀       .%@@@@%::;         "
                        "⠸⣎⠋⢠⢢⠀⢠⢀⠀⠀⣠⠴⠋⠀⠀⠀⠀⠀⠀⠀  ⣷⢰⢢⠀⠀⠘⠚⠀⢰⣂⠆⠰⢥⡡⠞⠁⠀⠀⠀⠀    "
                        "   .%@@@@%::;         ⠸⣎⠋⢠⢢⠀⢠⢀⠀⠀⣠⠴⠋⠀⠀⠀⠀⠀⠀⠀\n"
                        "  ⠸⣎⠋⢠⢢⠀⢠⢀⠀⠀⣠⠴⠋⠀⠀⠀⠀⠀⠀⠀       ;%@@@@%::;.        "
                        "⠀⠘⠷⣬⣅⣀⣬⡷⠖⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀  ⠸⣎⠋⢠⢢⠀⢠⢀⠀⠀⣠⠴⠋⠀⠀⠀⠀⠀⠀⠀    "
                        "   ;%@@@@%::;.        ⠀⠘⠷⣬⣅⣀⣬⡷⠖⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀\n"
                        "  ⠀⠘⠷⣬⣅⣀⣬⡷⠖⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀      ;%@@@@%%:;;;.       "
                        "⠀⠀⠀⠀⠈⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀   ⠀⠘⠷⣬⣅⣀⣬⡷⠖⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀    "
                        "  ;%@@@@%%:;;;.       ⠀⠀⠀⠀⠈⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀ \n"
                        "  ⠀⠀⠀⠀⠈⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀   ...;%@@@@@%%:;;;;,..    "
                        "Gilo97                ⠀⠀⠀⠀⠈⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀   "
                        "...;%@@@@@%%:;;;;,..    Gilo97              \n";

ShrubberyCreationForm::ShrubberyCreationForm()
    : AForm("ShrubberyCreationForm", 145, 137), target("shrubbery") {
  std::cout << COLB_RED << "New default shrubbery form :)" << RESET
            << std::endl;
}

ShrubberyCreationForm::ShrubberyCreationForm(std::string target)
    : AForm("ShrubberyCreationForm", 145, 137), target(target) {
  std::cout << COLB_RED << "New shrubbery form for " << BOLD << target << RESET
            << COLB_RED << " :)" << RESET << std::endl;
}

void ShrubberyCreationForm::action(const Bureaucrat &by) const {
  (void)(by);
  std::string filename = this->target;
  filename += "_shrubbery";
  std::ofstream file;
  file.open(filename.c_str(), std::ios::out | std::ios::trunc);
  if (file.fail()) {
    std::cerr << "Error, sadly no shrubbery :((" << std::endl;
    return;
  }
  file << SHRUBBERY;
  file.flush();
  file.close();
}
